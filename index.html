<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI职业性格测评工具 - 16型人格</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #5d6afb 0%, #3a49d8 100%);
            color: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(93, 106, 251, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .intro-section {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(93, 106, 251, 0.1);
        }
        
        .intro-section h2 {
            color: #3a49d8;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f2ff;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .intro-section h2 i {
            color: #5d6afb;
        }
        
        .intro-section p {
            margin-bottom: 18px;
            color: #555;
        }
        
        .mbti-dimensions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 18px;
            margin-top: 25px;
        }
        
        .dimension {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #5d6afb;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .dimension:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(93, 106, 251, 0.1);
        }
        
        .dimension h4 {
            color: #3a49d8;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .dimension p {
            font-size: 0.95rem;
            margin-bottom: 0;
            color: #666;
        }
        
        .test-section {
            flex: 2;
            min-width: 300px;
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(93, 106, 251, 0.1);
        }
        
        .progress-container {
            margin-bottom: 30px;
            background: #f8f9ff;
            padding: 25px;
            border-radius: 12px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .progress-text {
            color: #3a49d8;
        }
        
        .progress-bar {
            height: 12px;
            background-color: #e6e9ff;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #5d6afb, #3a49d8);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%
            );
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .question-container {
            display: none;
            padding: 10px 0;
        }
        
        .question-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question-number {
            color: #5d6afb;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .question-number i {
            font-size: 1.2rem;
        }
        
        .question-text {
            font-size: 1.4rem;
            margin-bottom: 30px;
            color: #333;
            line-height: 1.5;
            font-weight: 500;
            padding: 15px 0;
        }
        
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            padding: 15px 18px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            position: relative;
            border: 1px solid #e6e9ff;
            background-color: white;
        }
        
        .option:hover {
            background-color: #f8f9ff;
            transform: translateX(5px);
            border-color: #c8d0ff;
        }
        
        .option.selected {
            background-color: #f0f5ff;
            border-color: #5d6afb;
            box-shadow: 0 5px 15px rgba(93, 106, 251, 0.1);
        }
        
        .option-label {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: white;
            color: #5d6afb;
            border-radius: 8px;
            margin-right: 16px;
            flex-shrink: 0;
            font-weight: 700;
            font-size: 1rem;
            border: 2px solid #5d6afb;
        }
        
        .option.selected .option-label {
            background: #5d6afb;
            color: white;
        }
        
        .option-text {
            font-size: 1.05rem;
            flex-grow: 1;
            color: #444;
        }
        
        .auto-advance-note {
            margin-top: 20px;
            padding: 12px 16px;
            background-color: #f0f5ff;
            border-radius: 8px;
            border-left: 4px solid #5d6afb;
            font-size: 0.95rem;
            color: #555;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .auto-advance-note i {
            color: #5d6afb;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .btn-prev {
            background-color: #f0f2ff;
            color: #5d6afb;
        }
        
        .btn-prev:hover:not(:disabled) {
            background-color: #e6e9ff;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(93, 106, 251, 0.2);
        }
        
        .btn-save {
            background: linear-gradient(135deg, #4a6cf7, #3a5ce6);
            color: white;
        }
        
        .btn-save:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(93, 106, 251, 0.3);
            background: linear-gradient(135deg, #3a5ce6, #2a4cd5);
        }
        
        .btn-submit {
            background: linear-gradient(135deg, #3a49d8, #5d6afb);
            color: white;
        }
        
        .btn-submit:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(93, 106, 251, 0.3);
            background: linear-gradient(135deg, #2d3aa5, #4a57c7);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
        }
        
        .result-section {
            display: none;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-top: 30px;
            border: 1px solid rgba(93, 106, 251, 0.1);
        }
        
        .result-section.active {
            display: block;
            animation: fadeIn 0.8s ease;
        }
        
        .result-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 1px solid #f0f2ff;
        }
        
        .result-header h2 {
            color: #3a49d8;
            font-size: 2.2rem;
            margin-bottom: 15px;
        }
        
        .personality-type {
            font-size: 4rem;
            font-weight: 800;
            color: #5d6afb;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            letter-spacing: 2px;
            background: linear-gradient(135deg, #5d6afb, #3a49d8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .type-name {
            font-size: 1.5rem;
            color: #666;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .result-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .result-card {
            background: #f8f9ff;
            padding: 30px;
            border-radius: 12px;
            border-top: 4px solid #5d6afb;
            transition: transform 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
        }
        
        .result-card h3 {
            color: #3a49d8;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
        }
        
        .result-card p {
            margin-bottom: 15px;
            color: #555;
        }
        
        .dimension-scores {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            background: #f8f9ff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .dimension-score {
            text-align: center;
            flex: 1;
        }
        
        .dimension-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #3a49d8;
        }
        
        .dimension-bar {
            height: 20px;
            background-color: #e6e9ff;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }
        
        .dimension-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .dimension-label {
            font-size: 1.1rem;
            font-weight: 600;
            color: #444;
        }
        
        .dimension-e {
            background: linear-gradient(90deg, #5d6afb, #3a49d8);
        }
        
        .dimension-i {
            background: linear-gradient(90deg, #3498db, #2980b9);
        }
        
        .dimension-s {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
        }
        
        .dimension-n {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
        }
        
        .dimension-t {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }
        
        .dimension-f {
            background: linear-gradient(90deg, #f39c12, #d35400);
        }
        
        .dimension-j {
            background: linear-gradient(90deg, #1abc9c, #16a085);
        }
        
        .dimension-p {
            background: linear-gradient(90deg, #34495e, #2c3e50);
        }
        
        .career-suggestions {
            margin-top: 40px;
            background: #f8f9ff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .career-suggestions h3 {
            color: #3a49d8;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e6e9ff;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .career-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .career-item {
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            border-left: 3px solid #5d6afb;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .career-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(93, 106, 251, 0.1);
        }
        
        .restart-btn {
            display: block;
            margin: 40px auto 0;
            padding: 16px 45px;
            background: linear-gradient(135deg, #5d6afb, #3a49d8);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(93, 106, 251, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(93, 106, 251, 0.3);
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid rgba(93, 106, 251, 0.1);
            color: #666;
            font-size: 0.9rem;
        }
        
        .disclaimer {
            background: linear-gradient(135deg, #fff8e1, #fff3cd);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 0.9rem;
            border-left: 4px solid #ffc107;
            color: #856404;
        }
        
        .save-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4a6cf7, #3a5ce6);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(74, 108, 247, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 1000;
        }
        
        .save-notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            .personality-type {
                font-size: 3rem;
            }
            
            .dimension-scores {
                flex-direction: column;
                gap: 25px;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .mbti-dimensions {
                grid-template-columns: 1fr;
            }
            
            .option {
                padding: 14px 16px;
            }
            
            .save-notification {
                left: 20px;
                right: 20px;
                text-align: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MBTI职业性格测评</h1>
            <p>专业的16型人格评估工具，通过93道题目深入分析您的性格类型，为职业发展提供科学参考</p>
        </header>
        
        <div class="main-content">
            <section class="intro-section">
                <h2><i class="fas fa-info-circle"></i> 关于MBTI测评</h2>
                <p>MBTI（迈尔斯-布里格斯类型指标）是一种人格类型理论模型，基于荣格的心理类型理论发展而来。它通过四个维度分析人格偏好，形成16种人格类型。</p>
                <p>本测评包含93道题目，预计完成时间15-20分钟。请根据您的第一反应选择最符合的选项，无需过度思考。</p>
                
                <div class="mbti-dimensions">
                    <div class="dimension">
                        <h4>外向(E) - 内向(I)</h4>
                        <p>关注方向：外部世界 vs 内部世界</p>
                    </div>
                    <div class="dimension">
                        <h4>实感(S) - 直觉(N)</h4>
                        <p>信息获取：具体细节 vs 抽象模式</p>
                    </div>
                    <div class="dimension">
                        <h4>思维(T) - 情感(F)</h4>
                        <p>决策方式：客观逻辑 vs 主观价值</p>
                    </div>
                    <div class="dimension">
                        <h4>判断(J) - 知觉(P)</h4>
                        <p>生活方式：计划有序 vs 灵活适应</p>
                    </div>
                </div>
                
                <div class="disclaimer">
                    <p><strong>免责声明：</strong>本测评工具仅供参考，不能替代专业心理咨询。MBTI测评结果受多种因素影响，建议结合其他评估工具和个人反思。</p>
                </div>
            </section>
            
            <section class="test-section">
                <div class="progress-container">
                    <div class="progress-header">
                        <span>测评进度</span>
                        <span id="progress-text" class="progress-text">0/93</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
                
                <div id="question-container" class="question-container active">
                    <!-- 题目将动态加载到这里 -->
                </div>
                
                <div class="auto-advance-note">
                    <i class="fas fa-info-circle"></i>
                    <span>选择选项后将自动保存并进入下一题。您可以使用"上一题"按钮返回修改答案。</span>
                </div>
                
                <div class="navigation-buttons">
                    <button id="prev-btn" class="btn btn-prev" disabled>
                        <i class="fas fa-arrow-left"></i> 上一题
                    </button>
                    <button id="save-btn" class="btn btn-save">
                        <i class="fas fa-save"></i> 保存进度
                    </button>
                    <button id="submit-btn" class="btn btn-submit" style="display: none;">
                        <i class="fas fa-paper-plane"></i> 提交测评
                    </button>
                </div>
            </section>
        </div>
        
        <section id="result-section" class="result-section">
            <!-- 结果将动态加载到这里 -->
        </section>
        
        <footer>
            <p>© 2025 MBTI职业性格测评工具 | 基于迈尔斯-布里格斯类型指标理论</p>
            <p>本工具仅供个人参考使用，不用于专业诊断或商业用途</p>
        </footer>
        
        <div id="save-notification" class="save-notification">
            <i class="fas fa-check-circle"></i>
            <span>进度已保存</span>
        </div>
    </div>

    <script>
        // 详细的MBTI题目数据
        const mbtiQuestions = [
            // 外向(E) vs 内向(I) 维度 - 23题
            { 
                text: "在社交聚会中，你通常",
                options: ["主动与很多人交谈，包括陌生人", "只与少数熟悉的人交谈", "介于两者之间"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "当需要完成一项任务时，你更喜欢",
                options: ["与他人合作完成", "独自一人完成", "视任务性质而定"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "在小组讨论中，你通常",
                options: ["积极参与并发表意见", "先倾听他人意见再表达", "保持沉默除非被问到"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "你更喜欢的工作环境是",
                options: ["开放、热闹的办公室", "安静、私人的空间", "两者都可以接受"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "当你感到疲倦时，你倾向于",
                options: ["与朋友一起放松", "独自休息或进行安静活动", "取决于疲倦程度"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "认识新朋友时，你通常",
                options: ["主动介绍自己并开始交谈", "等待别人先开口", "感到有些紧张但会尝试交流"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "在周末，你更喜欢",
                options: ["安排社交活动或外出", "宅在家里放松", "两者平衡"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "当你有想法时，你倾向于",
                options: ["立即与他人分享", "先自己思考成熟再分享", "视想法的重要性而定"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "在电话交流中，你通常",
                options: ["享受长时间交谈", "希望尽快结束通话", "取决于通话内容"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "你更喜欢哪种学习方式",
                options: ["小组讨论和互动", "独自阅读和研究", "两者结合"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "当你遇到问题时，你倾向于",
                options: ["立即向他人求助或讨论", "先自己尝试解决", "视问题难度而定"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "在大型活动中，你通常",
                options: ["感到兴奋并积极参与", "感到压力并希望早点离开", "享受观察他人"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "你更愿意被描述为",
                options: ["外向和健谈", "内向和深思", "视情况而定"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "在思考时，你倾向于",
                options: ["通过交谈来理清思路", "独自安静思考", "两者都有"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "当你需要做出决定时，你倾向于",
                options: ["与他人讨论后再决定", "独自分析后决定", "视决定的重要性而定"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "你更喜欢哪种沟通方式",
                options: ["面对面交谈", "文字信息或邮件", "视沟通内容而定"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "在团队项目中，你通常",
                options: ["主动担任领导角色", "作为团队成员支持他人", "视项目需要而定"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "你的能量更多来自于",
                options: ["与他人互动", "独处和反思", "两者都有"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "你更喜欢哪种庆祝方式",
                options: ["大型派对", "小型亲密聚会", "取决于庆祝什么"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "当你需要放松时，你倾向于",
                options: ["与朋友一起活动", "独自看书或看电影", "两者都有"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "在会议中，你通常",
                options: ["积极发言", "倾听并偶尔发言", "除非必要否则不发言"],
                dimension: "EI",
                direction: "E"
            },
            { 
                text: "你更愿意花时间在",
                options: ["社交活动", "个人爱好", "两者平衡"],
                dimension: "EI",
                direction: "I"
            },
            { 
                text: "当你有很多事情要做时，你倾向于",
                options: ["告诉他人以获取支持", "自己默默处理", "视压力程度而定"],
                dimension: "EI",
                direction: "E"
            },
            
            // 实感(S) vs 直觉(N) 维度 - 23题
            { 
                text: "你更关注",
                options: ["具体的事实和细节", "整体的可能性和模式", "两者都有"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "当你学习新东西时，你更喜欢",
                options: ["按部就班的指导", "探索概念和理论", "取决于学习内容"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "你更信任",
                options: ["实际经验和数据", "直觉和灵感", "两者结合"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更喜欢哪种类型的书籍",
                options: ["实用指南或纪实文学", "科幻小说或哲学著作", "各种类型都读"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "当你描述事物时，你倾向于",
                options: ["详细描述具体特征", "描述整体印象和意义", "视情况而定"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更擅长",
                options: ["处理实际问题和细节", "构思新想法和可能性", "两者都有"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "当你计划旅行时，你更关注",
                options: ["具体的行程和安排", "旅行的体验和可能性", "两者都关注"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更倾向于",
                options: ["专注于当下任务", "思考未来可能性", "两者都有"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "在工作中，你更注重",
                options: ["具体的成果和效率", "创新和改进", "两者都注重"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更容易注意到",
                options: ["事物的实际细节", "事物的潜在含义", "两者都有"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "你更欣赏哪种类型的人",
                options: ["务实和可靠的人", "有创意和远见的人", "两者都欣赏"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "当你解决问题时，你倾向于",
                options: ["使用已知的有效方法", "尝试新方法", "视问题而定"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "你更喜欢哪种类型的电影",
                options: ["基于真实事件", "科幻或奇幻题材", "各种类型"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更倾向于相信",
                options: ["亲眼所见", "直觉感受", "两者结合"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "当你回忆过去时，你更容易记住",
                options: ["具体的细节和事实", "整体的感觉和印象", "两者都有"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更喜欢讨论",
                options: ["实际的生活话题", "抽象的概念和理论", "两者都有"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "你更擅长处理",
                options: ["具体的、明确的任务", "模糊的、开放性的任务", "视任务而定"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更倾向于哪种思维方式",
                options: ["线性的、逐步的", "跳跃的、关联的", "两者都有"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "你更欣赏哪种艺术形式",
                options: ["写实主义", "抽象主义", "各种形式"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更关注哪种类型的信息",
                options: ["具体的统计数据", "趋势和模式", "两者都关注"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "当你学习时，你更喜欢",
                options: ["按步骤学习", "探索性学习", "取决于学科"],
                dimension: "SN",
                direction: "S"
            },
            { 
                text: "你更倾向于哪种解释方式",
                options: ["字面解释", "象征性解释", "视情况而定"],
                dimension: "SN",
                direction: "N"
            },
            { 
                text: "你更信任哪种类型的证据",
                options: ["具体的数据和事实", "理论框架和逻辑", "两者结合"],
                dimension: "SN",
                direction: "S"
            },
            
            // 思维(T) vs 情感(F) 维度 - 23题
            { 
                text: "当你做决定时，你更注重",
                options: ["逻辑和客观分析", "人们的感受和价值观", "两者都考虑"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "在冲突中，你更关注",
                options: ["问题本身和解决方案", "人们的感受和关系", "两者都关注"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更倾向于哪种评价方式",
                options: ["基于事实和逻辑", "基于感受和价值观", "视情况而定"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "当你批评他人时，你更注重",
                options: ["直接指出问题", "以温和方式表达", "视关系和情境而定"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更欣赏哪种类型的领导",
                options: ["能力强且公正", "善解人意且支持他人", "两者都欣赏"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "当你给予反馈时，你更注重",
                options: ["准确性和有效性", "对方的感受和接受度", "两者都注重"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更倾向于哪种价值观",
                options: ["公正和真理", "和谐和同情", "两者都重视"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "在人际关系中，你更注重",
                options: ["相互尊重和理解", "情感连接和支持", "两者都注重"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更擅长处理",
                options: ["技术性或分析性任务", "人际关系或情感问题", "两者都有"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "你更倾向于哪种同情方式",
                options: ["提供实际帮助", "提供情感支持", "两者都有"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "当你考虑职业选择时，你更注重",
                options: ["发展前景和薪资", "工作意义和团队氛围", "两者都考虑"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "你更欣赏哪种类型的同事",
                options: ["能力强且可靠", "友善且合作", "两者都欣赏"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更倾向于哪种说服方式",
                options: ["使用逻辑和证据", "诉诸情感和价值观", "两者结合"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "在团队中，你更注重",
                options: ["效率和成果", "团队和谐与合作", "两者都注重"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更信任哪种类型的论据",
                options: ["基于数据和事实", "基于经验和感受", "两者结合"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "你更倾向于哪种沟通风格",
                options: ["直接和明确", "温和和体贴", "视情况而定"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "当你解决问题时，你更注重",
                options: ["问题的逻辑结构", "问题涉及的人际因素", "两者都考虑"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "你更欣赏哪种类型的朋友",
                options: ["聪明且有趣", "忠诚且善解人意", "两者都欣赏"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更倾向于哪种决策方式",
                options: ["理性分析", "直觉感受", "两者结合"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "在评价他人时，你更注重",
                options: ["能力和成就", "品格和动机", "两者都注重"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更擅长哪种类型的讨论",
                options: ["理性辩论", "情感交流", "两者都有"],
                dimension: "TF",
                direction: "T"
            },
            { 
                text: "你更倾向于哪种关怀方式",
                options: ["提供解决方案", "提供情感倾听", "两者都有"],
                dimension: "TF",
                direction: "F"
            },
            { 
                text: "你更信任哪种类型的判断",
                options: ["基于逻辑分析", "基于直觉感受", "两者结合"],
                dimension: "TF",
                direction: "T"
            },
            
            // 判断(J) vs 知觉(P) 维度 - 24题
            { 
                text: "在日常生活中，你更喜欢",
                options: ["有计划和安排", "灵活和随性", "两者平衡"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "当面对截止日期时，你倾向于",
                options: ["提前完成", "最后一刻完成", "视情况而定"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更擅长处理",
                options: ["结构化的任务", "开放性的任务", "两者都有"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "在旅行时，你更喜欢",
                options: ["详细计划行程", "随性探索", "基本规划但留有余地"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更倾向于哪种工作方式",
                options: ["按计划一步步进行", "灵活调整适应变化", "两者结合"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "当你有多项任务时，你倾向于",
                options: ["列出清单并按顺序完成", "根据兴趣和灵感选择", "两者都有"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更欣赏哪种类型的环境",
                options: ["整洁有序", "自由随意", "两者之间"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "当你做计划时，你倾向于",
                options: ["详细计划每个步骤", "只制定大致框架", "视计划的重要性而定"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更倾向于哪种生活方式",
                options: ["规律和稳定", "多变和新鲜", "两者平衡"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "在面对变化时，你倾向于",
                options: ["感到不安", "感到兴奋", "视变化性质而定"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更擅长哪种类型的工作",
                options: ["需要组织和规划的工作", "需要适应和灵活的工作", "两者都有"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "你更倾向于哪种学习方式",
                options: ["按课程安排学习", "根据自己的兴趣学习", "两者结合"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "在购物时，你倾向于",
                options: ["列出清单按需购买", "随性浏览和购买", "两者之间"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "你更欣赏哪种类型的安排",
                options: ["明确和确定的安排", "灵活和开放的选择", "视情况而定"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更倾向于哪种决策过程",
                options: ["尽快做出决定", "保持开放直到必要时", "视决定的重要性而定"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "在空闲时间，你倾向于",
                options: ["安排具体活动", "随心所欲", "两者都有"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更擅长处理哪种类型的任务",
                options: ["有明确要求的任务", "自主决定如何完成的任务", "两者都有"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "你更倾向于哪种组织方式",
                options: ["系统化和分类", "随意堆放但知道在哪", "介于两者之间"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "在项目中，你更注重",
                options: ["按计划完成", "过程中的学习和适应", "两者都注重"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "你更欣赏哪种类型的灵活性",
                options: ["有结构的灵活性", "完全的自由度", "两者之间"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更倾向于哪种完成工作的方式",
                options: ["一次专注于一项任务", "多项任务交替进行", "视工作性质而定"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "在社交活动中，你倾向于",
                options: ["提前约定", "临时决定", "两者都有"],
                dimension: "JP",
                direction: "P"
            },
            { 
                text: "你更擅长哪种类型的时间管理",
                options: ["严格遵守时间表", "灵活调整时间安排", "两者结合"],
                dimension: "JP",
                direction: "J"
            },
            { 
                text: "你更倾向于哪种生活节奏",
                options: ["稳定可预测", "多变有惊喜", "两者平衡"],
                dimension: "JP",
                direction: "P"
            }
        ];
        
        // 初始化变量
        let currentQuestion = 0;
        let answers = new Array(mbtiQuestions.length).fill(null);
        let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        
        // DOM元素
        const questionContainer = document.getElementById('question-container');
        const prevBtn = document.getElementById('prev-btn');
        const saveBtn = document.getElementById('save-btn');
        const submitBtn = document.getElementById('submit-btn');
        const progressText = document.getElementById('progress-text');
        const progressFill = document.getElementById('progress-fill');
        const resultSection = document.getElementById('result-section');
        const saveNotification = document.getElementById('save-notification');
        
        // 尝试从本地存储加载进度
        function loadProgress() {
            const savedProgress = localStorage.getItem('mbtiTestProgress');
            if (savedProgress) {
                try {
                    const progress = JSON.parse(savedProgress);
                    answers = progress.answers || new Array(mbtiQuestions.length).fill(null);
                    currentQuestion = progress.currentQuestion || 0;
                    
                    // 如果所有问题都已回答，跳转到最后一题
                    const answeredCount = answers.filter(answer => answer !== null).length;
                    if (answeredCount === mbtiQuestions.length) {
                        currentQuestion = mbtiQuestions.length - 1;
                    }
                    
                    // 显示加载进度提示
                    showSaveNotification('已加载保存的进度');
                } catch (e) {
                    console.error('加载进度失败:', e);
                }
            }
        }
        
        // 保存进度到本地存储
        function saveProgress() {
            const progress = {
                answers: answers,
                currentQuestion: currentQuestion,
                timestamp: new Date().getTime()
            };
            localStorage.setItem('mbtiTestProgress', JSON.stringify(progress));
        }
        
        // 清除进度
        function clearProgress() {
            localStorage.removeItem('mbtiTestProgress');
        }
        
        // 显示保存通知
        function showSaveNotification(message = '进度已保存') {
            const notificationText = saveNotification.querySelector('span');
            notificationText.textContent = message;
            
            saveNotification.classList.add('show');
            
            setTimeout(() => {
                saveNotification.classList.remove('show');
            }, 2000);
        }
        
        // 初始化测评
        function initTest() {
            loadProgress();
            updateProgress();
            showQuestion(currentQuestion);
            updateButtons();
        }
        
        // 显示问题
        function showQuestion(index) {
            const question = mbtiQuestions[index];
            
            // 创建选项HTML
            let optionsHTML = '';
            question.options.forEach((option, optionIndex) => {
                const isSelected = answers[index] === optionIndex;
                optionsHTML += `
                    <div class="option ${isSelected ? 'selected' : ''}" data-value="${optionIndex}">
                        <div class="option-label">${String.fromCharCode(65 + optionIndex)}</div>
                        <div class="option-text">${option}</div>
                    </div>
                `;
            });
            
            // 创建问题HTML
            const questionHTML = `
                <div class="question-number"><i class="fas fa-question-circle"></i> 第 ${index + 1} 题 / 共 ${mbtiQuestions.length} 题</div>
                <div class="question-text">${question.text}</div>
                <div class="options-container">
                    ${optionsHTML}
                </div>
            `;
            
            questionContainer.innerHTML = questionHTML;
            
            // 添加选项点击事件
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    selectOption(index, value);
                });
            });
        }
        
        // 选择选项
        function selectOption(questionIndex, value) {
            answers[questionIndex] = value;
            
            // 更新UI显示选中状态
            document.querySelectorAll('.option').forEach(option => {
                const optionValue = parseInt(option.getAttribute('data-value'));
                if (optionValue === value) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
            
            // 保存进度
            saveProgress();
            
            // 更新进度
            updateProgress();
            
            // 如果不是最后一题，延迟300毫秒后自动进入下一题
            if (currentQuestion < mbtiQuestions.length - 1) {
                setTimeout(() => {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                    updateButtons();
                }, 300);
            } else {
                // 最后一题，只更新按钮状态，确保提交按钮显示
                updateButtons();
            }
        }
        
        // 更新进度
        function updateProgress() {
            const answeredCount = answers.filter(answer => answer !== null).length;
            const progressPercentage = (answeredCount / mbtiQuestions.length) * 100;
            
            progressText.textContent = `${answeredCount}/${mbtiQuestions.length}`;
            progressFill.style.width = `${progressPercentage}%`;
        }
        
        // 更新按钮状态
        function updateButtons() {
            prevBtn.disabled = currentQuestion === 0;
            
            // 如果是最后一题，显示提交按钮
            if (currentQuestion === mbtiQuestions.length - 1) {
                submitBtn.style.display = 'flex';
                saveBtn.style.display = 'none';
            } else {
                submitBtn.style.display = 'none';
                saveBtn.style.display = 'flex';
            }
        }
        
        // 计算MBTI类型
        function calculateMBTI() {
            // 重置分数
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            // 计算每个维度的分数
            answers.forEach((answer, index) => {
                if (answer !== null) {
                    const question = mbtiQuestions[index];
                    const dimension = question.dimension;
                    const direction = question.direction;
                    
                    // 根据答案值增加分数（0-2分，转换为-1到1分）
                    // 第一个选项倾向该维度，最后一个选项倾向另一维度
                    let scoreValue = 0;
                    if (answer === 0) {
                        scoreValue = 1; // 完全倾向该维度
                    } else if (answer === 1) {
                        scoreValue = 0; // 中性或不确定
                    } else if (answer === 2) {
                        scoreValue = -1; // 倾向另一维度
                    }
                    
                    if (dimension === "EI") {
                        if (direction === "E") {
                            scores.E += scoreValue;
                            scores.I -= scoreValue;
                        } else {
                            scores.I += scoreValue;
                            scores.E -= scoreValue;
                        }
                    } else if (dimension === "SN") {
                        if (direction === "S") {
                            scores.S += scoreValue;
                            scores.N -= scoreValue;
                        } else {
                            scores.N += scoreValue;
                            scores.S -= scoreValue;
                        }
                    } else if (dimension === "TF") {
                        if (direction === "T") {
                            scores.T += scoreValue;
                            scores.F -= scoreValue;
                        } else {
                            scores.F += scoreValue;
                            scores.T -= scoreValue;
                        }
                    } else if (dimension === "JP") {
                        if (direction === "J") {
                            scores.J += scoreValue;
                            scores.P -= scoreValue;
                        } else {
                            scores.P += scoreValue;
                            scores.J -= scoreValue;
                        }
                    }
                }
            });
            
            // 确定每个维度的偏好
            const eiType = scores.E >= scores.I ? "E" : "I";
            const snType = scores.S >= scores.N ? "S" : "N";
            const tfType = scores.T >= scores.F ? "T" : "F";
            const jpType = scores.J >= scores.P ? "J" : "P";
            
            // 组合成MBTI类型
            const mbtiType = eiType + snType + tfType + jpType;
            
            // 计算每个维度的百分比（用于进度条）
            const maxPossible = mbtiQuestions.filter(q => q.dimension === "EI").length;
            const eiPercentage = (Math.abs(scores.E - scores.I) / (maxPossible * 2)) * 100;
            const snPercentage = (Math.abs(scores.S - scores.N) / (maxPossible * 2)) * 100;
            const tfPercentage = (Math.abs(scores.T - scores.F) / (maxPossible * 2)) * 100;
            const jpPercentage = (Math.abs(scores.J - scores.P) / (maxPossible * 2)) * 100;
            
            return {
                type: mbtiType,
                percentages: {
                    ei: Math.min(eiPercentage, 100),
                    sn: Math.min(snPercentage, 100),
                    tf: Math.min(tfPercentage, 100),
                    jp: Math.min(jpPercentage, 100)
                }
            };
        }
        
        // 人格类型描述数据
        const personalityData = {
            "ISTJ": {
                name: "物流师型人格",
                description: "您务实、有条理、注重事实，喜欢以系统化的方式处理事情。可靠、尽责，擅长建立秩序和结构。",
                traits: ["务实", "有条理", "可靠", "尽责", "注重细节"],
                strengths: ["可靠", "注重细节", "有条理", "实际", "负责任"],
                weaknesses: ["固执", "不灵活", "忽视整体", "过于传统"],
                careers: ["会计师", "审计师", "管理员", "工程师", "项目经理", "法律顾问", "军官", "药剂师"]
            },
            "ISFJ": {
                name: "守卫者型人格",
                description: "您温暖、有同情心、尽责，喜欢帮助他人。注重和谐，善于观察他人需求，是可靠的合作伙伴。",
                traits: ["有同情心", "尽责", "可靠", "善于观察", "支持他人"],
                strengths: ["可靠", "有同情心", "实际", "尽责", "善于观察"],
                weaknesses: ["过于谦虚", "避免冲突", "承担过多", "抵制变化"],
                careers: ["护士", "教师", "社会工作者", "行政助理", "图书管理员", "咨询师", "人力资源", "牧师"]
            },
            "INFJ": {
                name: "提倡者型人格",
                description: "您富有洞察力、有原则、充满激情。关注他人的成长与发展，致力于实现理想和价值观。",
                traits: ["有洞察力", "有原则", "充满激情", "理想主义", "富有同情心"],
                strengths: ["有创造力", "有洞察力", "有原则", "热情", "利他主义"],
                weaknesses: ["过于敏感", "完美主义", "难以取悦", "避免冲突"],
                careers: ["心理咨询师", "作家", "艺术家", "牧师", "教师", "社会工作者", "人力资源", "非营利组织工作者"]
            },
            "INTJ": {
                name: "建筑师型人格",
                description: "您富有想象力、战略性强、意志坚定。善于制定长远计划，喜欢用创新方式解决复杂问题。",
                traits: ["富有想象力", "战略性强", "意志坚定", "独立", "逻辑性强"],
                strengths: ["有远见", "逻辑性强", "独立", "果断", "善于计划"],
                weaknesses: ["傲慢", "过于批判", "情感疏离", "完美主义"],
                careers: ["科学家", "工程师", "律师", "医生", "大学教授", "战略规划师", "投资银行家", "软件开发者"]
            },
            "ISTP": {
                name: "鉴赏家型人格",
                description: "您大胆、实际、喜欢冒险。擅长使用工具和机械，善于在危机中保持冷静，解决问题。",
                traits: ["大胆", "实际", "喜欢冒险", "冷静", "善于分析"],
                strengths: ["乐观", "冷静", "灵活", "实际", "善于分析"],
                weaknesses: ["容易厌倦", "不敏感", "不喜欢承诺", "冒险"],
                careers: ["飞行员", "消防员", "警察", "工程师", "机械师", "运动员", "摄影师", "数据分析师"]
            },
            "ISFP": {
                name: "探险家型人格",
                description: "您灵活、有魅力、艺术感强。活在当下，享受生活中的美好事物，喜欢用创意表达自己。",
                traits: ["灵活", "有魅力", "艺术感强", "敏感", "追求和谐"],
                strengths: ["有魅力", "敏感", "艺术感强", "灵活", "追求和谐"],
                weaknesses: ["过于竞争", "过于敏感", "缺乏规划", "避免冲突"],
                careers: ["艺术家", "音乐家", "设计师", "兽医", "护士", "园丁", "厨师", "瑜伽教练"]
            },
            "INFP": {
                name: "调解员型人格",
                description: "您理想主义、忠诚、富有同情心。重视内在价值观，致力于帮助他人实现潜能。",
                traits: ["理想主义", "忠诚", "富有同情心", "有创造力", "价值观驱动"],
                strengths: ["有同情心", "有创造力", "理想主义", "忠诚", "价值观驱动"],
                weaknesses: ["不切实际", "过于理想化", "情感脆弱", "难以取悦"],
                careers: ["作家", "心理咨询师", "艺术家", "教师", "社会工作者", "编辑", "翻译", "人力资源"]
            },
            "INTP": {
                name: "逻辑学家型人格",
                description: "您富有创造力、好奇心强、思维敏捷。喜欢理论思考，擅长分析复杂概念，寻求知识理解。",
                traits: ["富有创造力", "好奇心强", "思维敏捷", "逻辑性强", "独立"],
                strengths: ["逻辑性强", "有创造力", "好奇心强", "客观", "灵活"],
                weaknesses: ["不切实际", "情感疏离", "过于批判", "缺乏条理"],
                careers: ["科学家", "哲学家", "数学家", "研究员", "程序员", "大学教授", "律师", "建筑师"]
            },
            "ESTP": {
                name: "企业家型人格",
                description: "您精力充沛、敏锐、享受冒险。善于把握机会，行动迅速，喜欢实际解决问题。",
                traits: ["精力充沛", "敏锐", "享受冒险", "实用", "善于社交"],
                strengths: ["精力充沛", "实用", "善于社交", "敏锐", "灵活"],
                weaknesses: ["冲动", "容易厌倦", "不敏感", "冒险"],
                careers: ["销售", "市场营销", "运动员", "消防员", "警察", "企业家", "记者", "导游"]
            },
            "ESFP": {
                name: "表演者型人格",
                description: "您热情、善于社交、自发。享受与他人互动，带来欢乐和活力，善于适应环境。",
                traits: ["热情", "善于社交", "自发", "有魅力", "实用"],
                strengths: ["有魅力", "善于社交", "热情", "实用", "灵活"],
                weaknesses: ["缺乏规划", "过于敏感", "容易分心", "避免冲突"],
                careers: ["演员", "主持人", "销售", "导游", "幼师", "活动策划", "护理", "美容师"]
            },
            "ENFP": {
                name: "竞选者型人格",
                description: "您热情、有创造力、社交能力强。充满新想法，善于激励他人，享受探索可能性。",
                traits: ["热情", "有创造力", "社交能力强", "乐观", "善于表达"],
                strengths: ["有创造力", "热情", "社交能力强", "乐观", "灵活"],
                weaknesses: ["缺乏条理", "过于理想化", "难以专注", "过于情绪化"],
                careers: ["心理咨询师", "记者", "演员", "教师", "人力资源", "公关", "作家", "社会工作者"]
            },
            "ENTP": {
                name: "辩论家型人格",
                description: "您聪明、好奇、思维敏捷。喜欢智力挑战，善于看到各种可能性，享受辩论新想法。",
                traits: ["聪明", "好奇", "思维敏捷", "善于表达", "创新"],
                strengths: ["聪明", "创新", "好奇心强", "善于表达", "灵活"],
                weaknesses: ["辩论倾向", "不敏感", "缺乏条理", "难以专注"],
                careers: ["企业家", "律师", "发明家", "记者", "市场营销", "顾问", "工程师", "教授"]
            },
            "ESTJ": {
                name: "总经理型人格",
                description: "您务实、果断、善于组织。喜欢建立秩序，确保事情按计划进行，是高效的执行者。",
                traits: ["务实", "果断", "善于组织", "负责", "传统"],
                strengths: ["负责", "务实", "善于组织", "果断", "高效"],
                weaknesses: ["固执", "不灵活", "缺乏情感", "过于传统"],
                careers: ["经理", "警察", "军官", "教师", "银行家", "行政人员", "法官", "项目经理"]
            },
            "ESFJ": {
                name: "执政官型人格",
                description: "您热心、尽责、合作。注重和谐，善于照顾他人，喜欢在团队中工作，建立联系。",
                traits: ["热心", "尽责", "合作", "善于社交", "传统"],
                strengths: ["热心", "善于社交", "合作", "尽责", "实用"],
                weaknesses: ["过于敏感", "依赖认可", "抵制变化", "避免冲突"],
                careers: ["护士", "教师", "社会工作者", "行政助理", "销售", "人力资源", "牧师", "活动策划"]
            },
            "ENFJ": {
                name: "主人公型人格",
                description: "您有魅力、有同情心、善于激励。天生的领导者，关注他人的成长，致力于实现共同目标。",
                traits: ["有魅力", "有同情心", "善于激励", "有说服力", "理想主义"],
                strengths: ["有魅力", "有同情心", "善于激励", "有说服力", "理想主义"],
                weaknesses: ["过于理想化", "过于敏感", "忽视自己", "避免冲突"],
                careers: ["教师", "心理咨询师", "人力资源", "公关", "销售", "政治家", "牧师", "社会工作者"]
            },
            "ENTJ": {
                name: "指挥官型人格",
                description: "您果断、有战略眼光、善于领导。天生的领导者，擅长制定计划，组织资源实现目标。",
                traits: ["果断", "有战略眼光", "善于领导", "逻辑性强", "雄心勃勃"],
                strengths: ["果断", "有战略眼光", "善于领导", "逻辑性强", "雄心勃勃"],
                weaknesses: ["固执", "傲慢", "情感疏离", "不耐烦"],
                careers: ["CEO", "企业家", "律师", "经理", "军官", "政治家", "投资银行家", "顾问"]
            }
        };
        
        // 显示结果
        function showResults() {
            const result = calculateMBTI();
            const personality = personalityData[result.type];
            
            // 计算每个维度的分数显示
            const eiScore = scores.E - scores.I;
            const snScore = scores.S - scores.N;
            const tfScore = scores.T - scores.F;
            const jpScore = scores.J - scores.P;
            
            // 创建结果HTML
            let resultHTML = `
                <div class="result-header">
                    <h2>您的MBTI职业性格类型是</h2>
                    <div class="personality-type">${result.type}</div>
                    <div class="type-name">${personality.name}</div>
                    <p>${personality.description}</p>
                </div>
                
                <div class="dimension-scores">
                    <div class="dimension-score">
                        <div class="dimension-name">外向(E) - 内向(I)</div>
                        <div class="dimension-bar">
                            <div class="dimension-fill dimension-e" style="width: ${eiScore >= 0 ? result.percentages.ei : 0}%"></div>
                            <div class="dimension-fill dimension-i" style="width: ${eiScore < 0 ? result.percentages.ei : 0}%"></div>
                        </div>
                        <div class="dimension-label">${eiScore >= 0 ? 'E' : 'I'} (${eiScore > 0 ? '+' : ''}${eiScore})</div>
                    </div>
                    
                    <div class="dimension-score">
                        <div class="dimension-name">实感(S) - 直觉(N)</div>
                        <div class="dimension-bar">
                            <div class="dimension-fill dimension-s" style="width: ${snScore >= 0 ? result.percentages.sn : 0}%"></div>
                            <div class="dimension-fill dimension-n" style="width: ${snScore < 0 ? result.percentages.sn : 0}%"></div>
                        </div>
                        <div class="dimension-label">${snScore >= 0 ? 'S' : 'N'} (${snScore > 0 ? '+' : ''}${snScore})</div>
                    </div>
                    
                    <div class="dimension-score">
                        <div class="dimension-name">思维(T) - 情感(F)</div>
                        <div class="dimension-bar">
                            <div class="dimension-fill dimension-t" style="width: ${tfScore >= 0 ? result.percentages.tf : 0}%"></div>
                            <div class="dimension-fill dimension-f" style="width: ${tfScore < 0 ? result.percentages.tf : 0}%"></div>
                        </div>
                        <div class="dimension-label">${tfScore >= 0 ? 'T' : 'F'} (${tfScore > 0 ? '+' : ''}${tfScore})</div>
                    </div>
                    
                    <div class="dimension-score">
                        <div class="dimension-name">判断(J) - 知觉(P)</div>
                        <div class="dimension-bar">
                            <div class="dimension-fill dimension-j" style="width: ${jpScore >= 0 ? result.percentages.jp : 0}%"></div>
                            <div class="dimension-fill dimension-p" style="width: ${jpScore < 0 ? result.percentages.jp : 0}%"></div>
                        </div>
                        <div class="dimension-label">${jpScore >= 0 ? 'J' : 'P'} (${jpScore > 0 ? '+' : ''}${jpScore})</div>
                    </div>
                </div>
                
                <div class="result-content">
                    <div class="result-card">
                        <h3><i class="fas fa-star"></i> 主要特征</h3>
                        <p>${personality.description}</p>
                        <div class="traits">
                            <h4>典型特质：</h4>
                            <p>${personality.traits.join(" · ")}</p>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3><i class="fas fa-thumbs-up"></i> 优势与劣势</h3>
                        <div>
                            <h4>优势：</h4>
                            <p>${personality.strengths.join(" · ")}</p>
                        </div>
                        <div>
                            <h4>可能的发展领域：</h4>
                            <p>${personality.weaknesses.join(" · ")}</p>
                        </div>
                    </div>
                </div>
                
                <div class="career-suggestions">
                    <h3><i class="fas fa-briefcase"></i> 职业建议</h3>
                    <p>基于您的性格类型，以下职业领域可能适合您：</p>
                    <div class="career-list">
                        ${personality.careers.map(career => `<div class="career-item">${career}</div>`).join('')}
                    </div>
                    <p style="margin-top: 20px; font-style: italic;">请注意：职业选择应综合考虑个人兴趣、价值观、技能和市场需求。</p>
                </div>
                
                <button class="restart-btn" id="restart-btn">
                    <i class="fas fa-redo"></i> 重新开始测评
                </button>
            `;
            
            resultSection.innerHTML = resultHTML;
            resultSection.classList.add('active');
            
            // 清除本地存储的进度
            clearProgress();
            
            // 添加重新开始按钮事件
            document.getElementById('restart-btn').addEventListener('click', restartTest);
            
            // 滚动到结果部分
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // 重新开始测评
        function restartTest() {
            currentQuestion = 0;
            answers = new Array(mbtiQuestions.length).fill(null);
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            resultSection.classList.remove('active');
            updateProgress();
            showQuestion(currentQuestion);
            updateButtons();
            
            // 清除本地存储的进度
            clearProgress();
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }
        
        // 事件监听
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateProgress();
                showQuestion(currentQuestion);
                updateButtons();
                saveProgress();
            }
        });
        
        saveBtn.addEventListener('click', function() {
            saveProgress();
            showSaveNotification();
        });
        
        submitBtn.addEventListener('click', function() {
            // 检查是否所有问题都已回答
            const unanswered = answers.filter(answer => answer === null).length;
            
            if (unanswered > 0) {
                if (confirm(`您还有${unanswered}道题目未回答。确定要提交吗？`)) {
                    showResults();
                }
            } else {
                showResults();
            }
        });
        
        // 初始化测评
        initTest();
    </script>
</body>
</html>
